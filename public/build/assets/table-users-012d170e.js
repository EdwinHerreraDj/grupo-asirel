import{S as t}from"./sweetalert2.esm.all-509645c6.js";$(document).ready(function(){l("#users-table"),u("#editUserForm","#edit_user_password","#edit_user_password_confirmation","#passError"),m(),p(),window.openModal=d,window.closeModal=c,window.editUser=f});function l(e){$(e).DataTable({paging:!0,searching:!0,info:!0,language:{lengthMenu:`
                <label class="flex items-center space-x-1 text-sm">
                    <span>Mostrar</span>
                    <select class="px-2 py-1 bg-white border border-gray-300 rounded shadow-sm text-sm focus:outline-none focus:ring-1 focus:ring-blue-500">
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="-1">Todos</option>
                    </select>
                    <span>registros por página</span>
                </label>
            `,zeroRecords:"No se encontraron resultados",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No hay registros disponibles",infoFiltered:"(filtrado de _MAX_ registros totales)",search:"Buscar:",paginate:{previous:"Anterior",next:"Siguiente"}}})}function u(e,o,r,s){$(e).on("submit",function(n){const a=$(o).val(),i=$(r).val();if(a&&a!==i)return n.preventDefault(),$(s).removeClass("hidden"),$(r).addClass("border-red-500"),$(o).addClass("border-red-500"),!1;$(s).addClass("hidden"),$(r).removeClass("border-red-500"),$(o).removeClass("border-red-500")})}function d(e){const o=$(`#${e}`);o.length?o.removeClass("hidden").addClass("flex"):console.error(`Modal con ID "${e}" no encontrado.`)}function c(e){const o=$(`#${e}`);o.length?o.removeClass("flex").addClass("hidden"):console.error(`Modal con ID "${e}" no encontrado.`)}function f(e,o,r,s){$("#editUserForm").attr("action",`/users/${e}`),$("#edit_user_name").val(o),$("#edit_user_email").val(r),$("#edit_user_role").val(s),$("#edit_user_password").val(""),$("#edit_user_password_confirmation").val(""),$("#passError").addClass("hidden"),d("editUserModal")}function m(e,o){$(document).on("click",".delete-user",function(){const r=$(this).data("user-id");t.fire({title:"¿Estás seguro?",text:"Eliminar este usuario es una acción irreversible.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",customClass:{cancelButton:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",confirmButton:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}}).then(s=>{s.isConfirmed?$.ajax({url:`/users/${r}`,type:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(n){n.success?t.fire("¡Eliminado!",n.message,"success").then(()=>{location.reload()}):t.fire("Error",n.message,"error")},error:function(n,a,i){console.error("Error al eliminar el usuario:",n),console.error("Estado:",a),console.error("Mensaje de error:",i),t.fire("Error","No se pudo eliminar el usuario. Inténtalo más tarde.","error")}}):t.fire({title:"Cancelado",text:"La eliminación del usuario ha sido cancelada.",icon:"info",confirmButtonText:"Entendido",customClass:{confirmButton:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}})})})}function p(){setTimeout(function(){$("#message-susses").addClass("hidden")},3e3)}
